<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AmbientDoc - AI Medical Scribe</title>
    <meta name="description" content="AI-powered medical scribe for UK GP consultations. Real-time transcription and structured clinical summaries.">
    
    <!-- Google Fonts for professional readability -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo-container">
                <!-- Enhanced logo: microphone with subtle wave -->
                <svg width="60" height="60" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="25" cy="25" r="24" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2"/>
                    <path d="M25 12c-4 0-7 3-7 7v8c0 4 3 7 7 7s7-3 7-7v-8c0-4-3-7-7-7zm-3 7h6v8h-6z" fill="#0ea5e9"/>
                    <circle cx="25" cy="32" r="3" fill="#0ea5e9"/>
                    <path d="M19 32c0 3 2 6 6 6s6-3 6-6" stroke="#0ea5e9" stroke-width="2" fill="none"/>
                </svg>
                <h1>AmbientDoc</h1>
            </div>
            <p class="subtitle">AI-Powered Medical Scribe for Healthcare Encounters</p>
            <p class="tagline">Focus on your patient and let AmbientDoc handle the notes</p>
            <p class="disclaimer">Demonstration tool only ‚Ä¢ Not for clinical use</p>
        </header>

        <main>
            <!-- Recording Controls -->
            <section class="controls card">
                <!-- Microphone Selector -->
                <div class="mic-select-container-inline">
                    <label for="microphoneDropdown">
                        <span class="mic-icon">üé§</span>
                        Microphone:
                    </label>
                    <select id="microphoneDropdown" class="mic-dropdown">
                        <option value="">Loading microphones...</option>
                    </select>
                </div>
                
                <!-- Telephone Mode Toggle -->
                <div class="telephone-mode-toggle">
                    <label class="toggle-label">
                        <input type="checkbox" id="telephoneModeCheckbox" class="toggle-checkbox">
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">üìû Telephone Consultation Mode</span>
                    </label>
                    <p class="toggle-description">Enable for phone calls. Share your telephony window with audio when prompted</p>
                </div>
                
                <div class="status" id="status">Ready to record</div>
                <div class="button-group">
                    <button id="startBtn" class="btn btn-primary large">
                        <span class="icon">‚è∫Ô∏è</span> Start Recording
                    </button>
                    <button id="pauseBtn" class="btn btn-warning large" disabled>
                        <span class="icon">‚è∏Ô∏è</span> Pause
                    </button>
                    <button id="stopBtn" class="btn btn-danger large" disabled>
                        <span class="icon">‚èπÔ∏è</span> Stop Recording
                    </button>
                </div>
            </section>

            <!-- Transcript Section -->
            <section class="transcript-section card">
                <div class="section-header" onclick="toggleTranscript()">
                    <h2>Consultation Transcript</h2>
                    <button class="collapse-btn" id="transcriptCollapseBtn" type="button">
                        <span class="icon">‚ñº</span>
                    </button>
                </div>
                <div id="transcriptContent" class="collapsible-content collapsed">
                    <div id="transcript" class="content-box editable" contenteditable="true">
                        <p class="placeholder">Transcription will appear here once you have finished recording</p>
                    </div>
                    <button id="clearTranscript" class="btn btn-outline" style="display: none;">
                        Clear Transcript
                    </button>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="summary-section card">
                <h2>Structured Clinical Summary</h2>
                <p class="ai-disclaimer">‚ö†Ô∏è AI can make mistakes. Please check the text carefully before pasting into the notes</p>
                <div id="summary" class="content-box editable" contenteditable="true">
                    <p class="placeholder">An AI-generated summary will appear here once you have finished recording</p>
                </div>
                <div class="button-group">
                    <button id="getSummary" class="btn btn-success" style="display: none;">
                        <span class="icon">‚ú®</span> Generate Summary
                    </button>
                    <button id="copySummary" class="btn btn-outline" style="display: none;">
                        <span class="icon">üìã</span> Copy to Clipboard
                    </button>
                </div>
            </section>

            <!-- Referral Letter Section -->
            <section class="referral-section card">
                <h2>Referral Letter</h2>
                <div id="referralLetter" class="content-box editable" contenteditable="true">
                    <p class="placeholder">Generate a clinical summary first, then create a referral letter for secondary care specialists</p>
                </div>
                <div class="button-group">
                    <button id="generateReferral" class="btn btn-success" style="display: none;">
                        <span class="icon">üìÑ</span> Generate Referral Letter
                    </button>
                    <button id="copyReferral" class="btn btn-outline" style="display: none;">
                        <span class="icon">üìã</span> Copy to Clipboard
                    </button>
                </div>
            </section>

            <!-- Patient Summary Section -->
            <section class="patient-summary-section card">
                <h2>Patient Summary</h2>
                <p class="section-description">Patient-friendly summary in plain English to share with the patient</p>
                <div id="patientSummary" class="content-box editable" contenteditable="true">
                    <p class="placeholder">Generate a clinical summary first, then create a patient-friendly summary to share</p>
                </div>
                <div class="button-group">
                    <button id="generatePatientSummary" class="btn btn-success" style="display: none;">
                        <span class="icon">üë§</span> Generate Patient Summary
                    </button>
                    <button id="copyPatientSummary" class="btn btn-outline" style="display: none;">
                        <span class="icon">üìã</span> Copy to Clipboard
                    </button>
                </div>
            </section>

            <!-- Privacy Notice -->
            <section class="privacy-notice card">
                <h3>üîí Privacy & Security</h3>
                <ul class="privacy-list">
                    <li>Audio is recorded locally in your browser and sent securely via encrypted connection to OpenAI Whisper for transcription</li>
                    <li>Only anonymised text transcripts are processed by AI for clinical summarisation ‚Äî no audio files or patient identifiers are stored</li>
                    <li>All data transmission uses industry-standard encryption</li>
                </ul>
            </section>
        </main>

        <footer>
            <p>AmbientDoc ¬© 2025 | Built for busy UK healthcare professionals</p>
        </footer>
    </div>

    <script src="app.js?v=5"></script>
</body>
</html>
